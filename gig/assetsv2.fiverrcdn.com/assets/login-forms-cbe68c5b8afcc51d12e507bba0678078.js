!function(e){var r={models:{c:Fiverr.models.context,b:Fiverr.models.browser,user:Fiverr.models.user,ps:Fiverr.models.ps,facepileLoadingFailed:!1,eventsDictionary:{view:{window:"viewed_reg_window",popup:"reg_from_popup"},click:{join_1:"join_step_1",join_2:"join_step_2",join:"signup_click",login:"login_click",facebook:"facebook_click",google:"google_click",linkedin:"linkedin_click"},join:{facebook:"facebook_reg",google:"google_reg",linkedin:"linkedin_reg"},login:{facebook:"facebook_login",google:"google_login",linkedin:"linkedin_login"}}},selectors:{},init:function(){var r=this,o=r.models;r.selectors;r.initialReports(),r.bindPopupTriggers(),r.initJoinForms(),r.initLoginForms(),e(".main-message").on("DOMSubtreeModified",".fb-facepile > span",function(r){var s=e(this);o.facepileLoadingFailed=!1,s.parent().css("display","inline-block"),0===s.innerHeight()&&(o.facepileLoadingFailed=!0,s.parent().css("display","none"))}),this.shouldOpenJoinPopupFromUrlParam(),(!ft.utl.getLS("popup-join-shown",!0,!0)&&(Fiverr.models.ps.push_join_lightbox||ft.utl.getLS("show-join-popup")||!!ft.utl.getUrlVars().show_join==!0)||ft.utl.getLS("unbounce-email"))&&(ft.utl.setLS("popup-join-shown",!0,!0),e(".js-sticky-footer").length||e(".popup-user-forms-new").length&&o.b.isMobileResponsive?ft.utl.setLS("show-join-popup",!0):(ft.utl.deleteLS("show-join-popup"),o.b.isMobileResponsive?this.openStickyJoin():this.forceJoinPopup()))},initialReports:function(){var r=this;e(".popup-user-forms-new:visible").length&&r.reportEvent("view","window")},initJoinForms:function(){(e("#join_form").length||e("#new_user").length)&&(ft.utl.getUrlHashVars().is_facebook_campaign?fForms.models.forms.popupJoinForm=new r.newJoinForm({form:e(".js-social-form-container #join_form")}):"create_partner_confirmation"===Fiverr.models.ps.sub?fForms.models.forms.popupJoinForm=new r.newJoinForm({form:e(".js-new-partner-join-container #join_form"),isNewPartner:!0}):fForms.models.forms.popupJoinForm=new r.newJoinForm,Fiverr.twoStepRegistration||fForms.focusFirstInput(e("form#join_form"))),e("#unbounce_join_form").length&&(fForms.models.forms.popupUnbounceJoinForm=new r.newJoinForm({form:e("#unbounce_join_form")}),fForms.focusFirstInput(e("form#join_form"))),e('[id="instant-reg-form"]').each(function(){var o=e(this),s=o.closest(".popup-user-forms-new"),t=s.find(".js-instant-reg-btn"),i=s.find(".js-link-instant-trigger"),n=o.find(".js-form-email"),a=ft.utl.getLS("userSubmittedEmail");Fiverr.twoStepRegistration&&(t=o.find("#join-btn")),a&&n.val(a),t.on(Fiverr.clickEventType,function(e){i.addClass("disabled")}),t.on("event-submit-form",function(e){i.removeClass("disabled")}),fForms.models.forms.popupInstantJoinForm=new r.newJoinForm({form:o}),fForms.focusFirstInput(o)})},initLoginForms:function(){if(e("#session_form").length&&(fForms.models.forms.popupSigninForm=new r.newLoginForm,fForms.models.forms.popupForgotPwForm=new r.newForgotPwForm,fForms.focusFirstInput(e("form#session_form"))),e("#instant-login-form").length){var o=e("#instant-login-form"),s=e(".popup-instant-link .forgot-password-form"),t=e(".js-instant-login-btn"),i=e(".js-instant-forgotpw-btn"),n=e(".js-link-instant-trigger");Fiverr.twoStepRegistration&&(t=o.find("#login-btn"),i=s.find("#forgotpw-btn")),t.on(Fiverr.clickEventType,function(e){n.addClass("disabled")}),t.on("event-submit-form",function(e){n.removeClass("disabled")}),fForms.models.forms.popupSigninForm=new r.newLoginForm({form:o,inputsToCheck:"",submitButton:t}),fForms.models.forms.popupForgotPwForm=new r.newForgotPwForm({form:s,inputsToCheck:"",submitButton:i}),fForms.focusFirstInput(o)}},bindPopupTriggers:function(){var o=this,s=o.models;o.selectors;e(document.body).on(Fiverr.clickEventType,".js-open-popup-login",function(r){var t=["new","create_social_user","new_from_social"];return o.reportEvent("click","login"),"users"===s.c.psMain&&_.includes(t,s.c.psSub)?!0:(r.preventDefault(),"user_sessions"===s.c.psMain?!1:void(s.b.isMobileResponsive?document.location="/login":Fiverr.openInlineUserPopupNew(o.getAnchorPopupType(e(this),"login"))))}),e(document.body).on(Fiverr.clickEventType,".js-open-popup-join",function(t){var i=["new","create_social_user","new_from_social"],n=e.cookie("guest_request_data"),a=e(this);if(o.reportEvent("click","join"),"user_sessions"===s.c.psMain)return!0;if(t.preventDefault(),"users"===s.c.psMain&&_.includes(i,s.c.psSub))return!1;if(n){var l=n.split(":")[0];return void r.shouldOpenJoinPopupFromUrlParam(l)}if(a.parents().hasClass("js-gig-collect")&&s.ps.gig_id){var p=new Date;p.setTime(p.getTime()+3e5),ft.utl.setCookie("collecting",s.ps.gig_id,p)}s.b.isMobileResponsive?document.location="/join"+location.search:r.openInlineUserPopupNew(o.getAnchorPopupType(a,"join"),a.attr("href"))})},newJoinForm:function(o){var s=this;s.models,s.selectors;o?(s.form=o.form,s.$submitButton=o.form.find('input[type="submit"]'),s.isNewPartner=o.isNewPartner?o.isNewPartner:!1):(s.form=e("#join_form"),s.$submitButton=s.form.find("#join-btn")),s.activeSection=s.form.data("active-section"),s.formSections=e(".js-form-join-section"),s.inputsToCheck=s.form.find('input[type="text"],input[type="password"],input[type="checkbox"]'),s.usernameStatus=e(s.form.find("#username-status")),s.usernameTimeout=null,s.usernameActive=!1,s.errors={container:e(s.form.find(".form-errors")),header:e("<h2><span></span>"+e.t("users.new.form.error_messages.errors_main_header")+"</h2>"),email:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.email")+"</p></div>"),username:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.username")+"</p></div>"),userNotAllowed:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.user_not_allowed")+"</p></div>"),userTaken:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.user_taken")+"</p></div>"),terms:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.terms")+"</p></div>")};var t=function(){if(s.setEvents(),e(".js-fb-form-toggle").on(Fiverr.clickEventType,function(r){r.preventDefault(),e(".js-fb-form-container").toggleClass("hidden")}),s.isNewPartner){var r=s.form.find(".js-form-email"),o=unescape(Fiverr.models.context.urlVars.email);r.val(o),s.$submitButton.trigger(Fiverr.clickEventType)}};s.fullReset=function(){e(s.form)[0].reset(),s.hideErrors(),s.usernameStatus.removeAttr("class"),s.$submitButton.removeAttr("disabled").removeClass("in-progress"),Fiverr.twoStepRegistration&&(e(".js-form-join-section").addClass("hidden").filter('[data-section="1"]').removeClass("hidden"),s.activeSection=1,document.twoStepActiveSection=1,r.lockSecondStep&&(s.form.closest(".popup-new").find("header > .btn-close").removeClass("hidden"),r.lockSecondStep=!1))},s.setEvents=function(){Fiverr.twoStepRegistration&&e.each(s.inputsToCheck,function(r,o){e(o).placeholder()}),s.form.submit(function(o){o.preventDefault(),s.$submitButton.attr("disabled","disabled").addClass("in-progress"),s.hideErrors();var t=s.checkForm();if(t)s.showErrors(t),s.$submitButton.removeAttr("disabled").removeClass("in-progress"),Fiverr.twoStepRegistration?s.inputsToCheck.filter(".with-error").first().focus():s.form.find('input[type="text"]')[0].focus();else if(Fiverr.twoStepRegistration&&1===s.activeSection){var i=s.form.find(".js-form-email");Fiverr.pushGoogleTag("save-email","two-step-reg"),e.ajax({url:"/validate_new_user_email",type:"post",data:{email:i.val()},dataType:"json",success:function(o){if("success"==o.status)s.activeSection=2,document.twoStepActiveSection=2,s.formSections.addClass("hidden").filter("[data-section=2]").removeClass("hidden").find('input[type="text"]').first().focus(),Fiverr.pushGoogleTag("open-popup","two-step-reg","join-step-2"),e(window).trigger("join-form-step-1-completed",s.form),s.$submitButton.val(s.$submitButton.data("toggle-text")).removeAttr("disabled").removeClass("in-progress"),r.lockSecondStep&&(e(".b-modal").unbind("click"),s.form.closest(".popup-new").find("header > .btn-close").addClass("hidden"));else{if(o.error){var t=[["email",o.error]];s.showErrors(t,"ajax")}s.$submitButton.removeAttr("disabled").removeClass("in-progress")}},error:function(){var e=[["email","Something went wrong, please try again."]];s.showErrors(e,"ajax"),s.$submitButton.removeAttr("disabled").removeClass("in-progress")}}),r.reportEvent("click","join_1")}else{s.$submitButton.hasClass("js-gtm-event-join")&&Fiverr.pushGoogleTag(s.$submitButton.data("gtm-action"),s.$submitButton.data("gtm-event"),s.$submitButton.data("gtm-label")),Fiverr.twoStepRegistration&&Fiverr.pushGoogleTag("finish-registration","two-step-reg");var n=ft.utl.getUrlVars(),a=s.form.attr("action"),l=s.form.attr("method")||"post",t=!1;n.lpcat&&(a+="?lp_cat="+n.lpcat),e.ajax({url:a,type:l,data:s.form.serialize(),dataType:"json",success:function(e){if("failure"==e.status){if(e.redirect_to_join_page&&("users"!==Fiverr.models.context.psMain||"new"!==Fiverr.models.context.psSub))return void(document.location.href="/join");s.showErrors(e.errors,"ajax"),s.$submitButton.removeAttr("disabled").removeClass("in-progress")}else{n.u_med&&n.u_sou&&n.ucam&&Fiverr.pushGoogleUniversalTag(n.u_med,"registration-complete",n.u_sou,n.ucam);var o="undefined"!=typeof fGigs,t=ft.utl.getUrlVars().redirect_to||r.models.redirectTo;if(t)document.location.href=t;else if(e.redirect_url){var i=ft.utl.getUrlVars(e.redirect_url);if(i.show_popup&&"true"===i.show_popup){var a=i.type;a&&(e.redirect_url+="&popup="+a)}document.location.href=e.redirect_url}else"users"===Fiverr.models.context.psMain&&"new"===Fiverr.models.context.psSub||"create_partner_confirmation"===Fiverr.models.context.psSub?document.location.href="/":o&&fGigs.orderStarted?(fGigs.models.user={userName:""},fForms.models.forms.orderForm.form.submit()):document.location.reload()}}}),r.reportEvent("click","join_2")}}),s.inputsToCheck.filter(".js-form-username").keyup(function(){if(s.usernameActive){var r=e(this);s.usernameStatus.removeAttr("class").addClass("username-status-loading"),clearTimeout(s.usernameTimeout),s.usernameTimeout=setTimeout(function(){s.usernameAvailable(r)},1e3)}else s.usernameActive=!0}),s.$submitButton.on(Fiverr.clickEventType,function(e){e.preventDefault(),s.$submitButton.attr("disabled","disabled").addClass("in-progress"),s.form.submit()})},s.checkForm=function(){var r,o=s.inputsToCheck;Fiverr.twoStepRegistration&&1===s.activeSection&&(o=o.filter(".js-form-email"));var t=!1;return e.each(o,function(o,s){var i=e(s);i.hasClass("js-form-email")?s.checkValue("email")||(i.addClass("with-error"),t+=",email"):i.hasClass("js-form-username")?(s.checkValue("newUser")||(i.addClass("with-error"),t+=",username"),i.hasClass("already_taken")&&(i.addClass("with-error"),t+=",userTaken"),i.hasClass("not_allowed")&&(i.addClass("with-error"),t+=",userNotAllowed")):i.hasClass("js-form-password")?(r=fForms.passwordIsValid(i.val()),r?i.parents(".input-wrap").find(".messaging-container p").removeClass("msg-error"):(i.addClass("with-error").parents(".input-wrap").find(".messaging-container p").addClass("msg-error"),t+=",password")):i.is('[name="terms_of_use"]')&&(i.prop("checked")||(i.addClass("with-error"),t+=",terms"))}),t?t.replace("false,","").split(","):t},s.usernameAvailable=function(r){return r.attr("class","js-form-username"),r[0].checkValue("newUser")?(s.usernameStatus.removeAttr("class").addClass("username-status-loading"),void e.ajax({type:"post",dataType:"text",url:"/checkuser",data:"username="+r.val(),success:function(o){switch(r.attr("class","js-form-username"),o){case"ok":r.addClass("ok"),r.closest(".input-wrap").find(".error-container").remove(),s.usernameStatus.removeAttr("class").addClass("username-status-ok");break;case"not allowed":r.addClass("not_allowed with-error"),s.showUserNameMsg(e.t("users.new.form.error_messages.user_not_allowed"),r),s.usernameStatus.removeAttr("class").addClass("username-status-error");break;case"is already taken":r.addClass("already_taken with-error"),s.showUserNameMsg(e.t("users.new.form.error_messages.user_taken"),r),s.usernameStatus.removeAttr("class").addClass("username-status-error")}}})):(s.usernameStatus.removeAttr("class").addClass("username-status-error"),r.addClass("with-error"),r.val().length<6?void s.showUserNameMsg(e.t("users.new.form.error_messages.user_too_short"),r):r.val().length>15?void s.showUserNameMsg(e.t("users.new.form.error_messages.user_too_long"),r):(r.addClass("not_allowed"),void s.showUserNameMsg(e.t("users.new.form.error_messages.user_not_allowed"),r)))},s.showErrors=function(o,t){switch(r.reportRegErrors(o),t=t||"inline"){case"inline":e.each(o,function(e,r){"password"!==r&&(Fiverr.twoStepRegistration?s.inputsToCheck.filter(".js-form-"+r).closest(".input-wrap").append(s.errors[r].css({display:"block"})):s.inputsToCheck.filter(".js-form-"+r).parent().append(s.errors[r].css({display:"block"})))});break;case"ajax":e.each(o,function(r,o){if("password"!==o[0]){var t=e('<div class="error-container"><p class="msg-error">'+o[1]+"</p></div>");Fiverr.twoStepRegistration?s.inputsToCheck.filter(".js-form-"+o[0]).addClass("with-error").closest(".input-wrap").append(t.css({display:"block"})):s.inputsToCheck.filter(".js-form-"+o[0]).closest(".input-wrap").append(s.errors[o[0]].css({display:"block"}))}})}},s.hideErrors=function(){s.inputsToCheck.removeClass("with-error"),s.errors.container.empty(),s.form.find(".error-container").remove()},s.showUserNameMsg=function(r,o){var s=e('<div class="error-container"><p class="msg-error">'+r+"</p></div>"),t=o.closest(".input-wrap");o.closest(".input-wrap").find(".error-container").length?t.find(".msg-error").html(r):t.append(s.css({display:"block"}))},t()},newLoginForm:function(o){var s=this;o?(s.form=o.form,s.inputsToCheck=s.form.find('input[type="text"],input[type="password"], input[type="checkbox"]'),s.$submitButton=o.submitButton):(s.form=e("#session_form"),s.inputsToCheck=s.form.find('input[type="text"],input[type="password"]'),s.$submitButton=s.form.find("#login-btn")),s.errors={container:e(s.form.find(".form-errors")),header:e("<h2>"+e.t("users.new.form.error_messages.login_errors.errors_main_header")+"</h2>"),login:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.login_errors.username")+"</p></div>"),password:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.login_errors.password")+"</p></div>"),username_pw:e("<li>"+e.t("users.new.form.error_messages.login_errors.user_or_password")+"</li>")},o&&(s.errors.terms=e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.terms")+"</p></div>"),s.errors.email=e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.email")+"</p></div>"));var t=function(){s.setEvents(),s.form.find(".js-btn-forgotpw").on(Fiverr.clickEventType,function(r){r.preventDefault(),e(".popup-content-login").hide(),e(".popup-content-forgotpw").show(),s.hideErrors()})};s.fullReset=function(){e(s.form)[0].reset(),s.hideErrors(),s.$submitButton.removeAttr("disabled").removeClass("in-progress").trigger("event-submit-form"),e(".popup-content-login").show(),e(".popup-content-forgotpw").hide()},s.setEvents=function(){Fiverr.twoStepRegistration&&e.each(s.inputsToCheck,function(r,o){e(o).placeholder()}),s.form.submit(function(r){s.$submitButton.attr("disabled","disabled").addClass("in-progress"),s.hideErrors();var o=s.checkForm();if(o)s.showErrors(o),s.form.find('input[type="text"]')[0].focus(),s.$submitButton.removeAttr("disabled").removeClass("in-progress").trigger("event-submit-form"),r.preventDefault();else{r.preventDefault();var t=s.form.attr("action"),i=s.form.attr("method")||"post",o=!1;e.ajax({url:t,type:i,data:s.form.serialize(),dataType:"json",success:function(e){if("redirect"===e.status)return void(e.url?location.href=e.url:location.reload());if("failure"===e.status)return Fiverr._broadcastLogEvents({facility:"graphite",type:"long_counter",label:"signing_event.failure_with_success_status.login_form."+t.replace(/\?.*/g,"").replace(/\W/g,"_")}),e.errors?s.showErrors(e.errors,"ajax"):(o=["username_pw"],s.showErrors(o)),s.form.find('input[type="text"]')[0].focus(),void s.$submitButton.removeAttr("disabled").removeClass("in-progress").trigger("event-submit-form");var r="undefined"!=typeof fGigs;e.redirect_url?document.location.href=e.redirect_url:Fiverr._isPage("user_sessions/new")?document.location.href="/":r&&fGigs.orderStarted?(fGigs.models.user={userName:""},fForms.models.forms.orderForm.form.submit()):Fiverr._isPage("landing_pages")?document.location.href=document.location.origin+document.location.pathname:location.reload()},error:function(e){var r=e.responseJSON;return r&&"failure"===r.status?r.redirect_to_join_page&&!Fiverr._isPage("users/new")?void(document.location.href="/join"):(s.showErrors(r.errors,"ajax"),void s.$submitButton.removeAttr("disabled").removeClass("in-progress")):void s.$submitButton.removeAttr("disabled").removeClass("in-progress")}})}})},s.checkForm=function(){var r=!1;return e.each(s.inputsToCheck,function(o,s){var t=e(s);t.hasClass("js-form-login")||t.hasClass("js-form-username")?s.checkValue("existUser")||(t.addClass("with-error"),r+=",login"):t.hasClass("js-form-password")?s.checkValue("password")||(t.addClass("with-error"),r+=",password"):t.is('[name="terms"]')?t.prop("checked")||(t.addClass("with-error"),r+=",terms"):t.is('[name="email"]')&&(s.checkValue("email")||(t.addClass("with-error"),r+=",email"))}),r?r.replace("false,","").split(","):r},s.showErrors=function(o,t){switch(t=t||"inline"){case"inline":e.each(o,function(e,r){Fiverr.twoStepRegistration?s.getInput(r).closest(".input-wrap").append(s.errors[r].css({display:"block"})):s.getInput(r).parent().append(s.errors[r].css({display:"block"}))});break;case"ajax":e.each(o,function(o,t){var i,n=t[0],a=t[1],l=t[2];return"DISPLAY_CHALLENGE"===l?void r.populateReCAPTCHA(s.getInput(n).closest(".input-wrap"),a):("RESET_CHALLENGE"===l&&r.resetReCAPTCHA(),i=e('<div class="error-container"><p class="msg-error">'+a+"</p></div>"),void(Fiverr.twoStepRegistration?s.getInput(n).addClass("with-error").closest(".input-wrap").append(i.css({display:"block"})):s.getInput(n).closest(".input-wrap").append(s.errors[n].css({display:"block"}))))})}},s.getInput=function(e){return s.inputsToCheck.filter('[name*="'+e+'"]')},s.hideErrors=function(){s.inputsToCheck.removeClass("with-error"),s.form.find(".error-container").remove(),s.errors.container.empty()},t()},newForgotPwForm:function(r){var o=this;r?(o.form=r.form,o.inputsToCheck=r.inputsToCheck.length?r.inputsToCheck:o.form.find('input[type="text"]'),o.$submitButton=r.submitButton):(o.form=e(".js-forgot-password-form"),o.inputsToCheck=o.form.find('input[type="text"]'),o.$submitButton=o.form.find("#forgotpw-btn")),o.errors={container:e(o.form.find(".form-errors")),email:e('<div class="error-container"><p class="msg-error">'+e.t("users.new.form.error_messages.login_errors.email")+"</p></div>")};var s=function(){o.setEvents(),e("body").on(Fiverr.clickEventType,".js-btn-signin",function(r){r.preventDefault(),e(".popup-content-login").show(),e(".popup-content-forgotpw").hide(),o.hideErrors()})};o.fullReset=function(){e(o.form)[0].reset(),o.hideErrors(),o.$submitButton.removeAttr("disabled").removeClass("in-progress")},o.setEvents=function(){Fiverr.twoStepRegistration&&e.each(o.inputsToCheck,function(r,o){e(o).placeholder()}),o.form.submit(function(e){o.$submitButton.attr("disabled","disabled").addClass("in-progress"),o.hideErrors();var r=o.checkForm();return r?(o.showErrors(r),o.form.find('input[type="text"]')[0].focus(),o.$submitButton.removeAttr("disabled").removeClass("in-progress"),!1):void 0})},o.checkForm=function(){var r=!1;return e.each(o.inputsToCheck,function(o,s){e(s).attr("name").match("email")&&(s.checkValue("email")||(e(s).addClass("with-error"),r+=",email"))}),r?r.replace("false,","").split(","):r},o.showErrors=function(r){e.each(r,function(e,r){Fiverr.twoStepRegistration?o.inputsToCheck.filter('[name*="'+r+'"]').closest(".input-wrap").append(o.errors[r].css({display:"block"})):o.inputsToCheck.filter('[name*="'+r+'"]').parent().append(o.errors[r].css({display:"block"}))})},o.hideErrors=function(){o.inputsToCheck.removeClass("with-error"),o.form.find(".error-container").remove(),o.errors.container.empty()},s()},shouldOpenJoinPopupFromUrlParam:function(e){var o=this,s=(o.models,ft.utl.getUrlVars()),t=e||(s.unbounce_join_email?decodeURIComponent(s.unbounce_join_email):""),i=fForms.models.forms.popupJoinForm;if(t&&!i&&ft.utl.setLS("unbounce-email",t),i&&(t&&!ft.utl.getLS("popup-join-shown",!0,!0)||ft.utl.getLS("unbounce-email"))){ft.utl.setLS("popup-join-shown",!0,!0);var n=i.form,a=n.find(".js-form-email");i.fullReset(),a.val(t),r.lockSecondStep=!1,_.delay(function(){r.forceJoinPopup(),s.u_med&&s.u_sou&&s.ucam&&Fiverr.pushGoogleUniversalTag(s.u_med,"registration-show",s.u_sou,s.ucam),n.submit()},50)}},openInlineUserPopupNew:function(r,o){var s,t=this,o=o||null,i="",n=null,a="",l=!0,p=!1;switch(r){case"join":i=".popup-user-register",a=".js-form-email",Fiverr.twoStepRegistration&&Fiverr.pushGoogleTag("open-popup","two-step-reg","join-step-1");break;case"login":i=".popup-user-login",a=".js-form-login",Fiverr.twoStepRegistration&&Fiverr.pushGoogleTag("open-popup","two-step-reg","login");break;case"existing_user":i=".popup-instant-link",a="#instant-buy-login",l=!1,s=!0,p=!0;break;case"new_user":i=".popup-instant-reg",a=".js-form-email",l=!1,s=!0,p=!0}var u="undefined"!=typeof fGigs,c=u?fGigs.orderStarted:!1;if("block"===e(".js-popup-gig-shipping").css("display")&&Fiverr.mainPopupBox.closeFast(),"join"===r&&o){var m=ft.utl.getUrlVars(o);m&&m.ref&&(n=m.ref)}if("block"===e("#js-popup-user").css("display")&&(e("#js-popup-user").removeAttr("id"),Fiverr.mainPopupBox.closeFast()),"block"===e(".js-popup-user-facebook").css("display")&&Fiverr.mainPopupBox.closeFast(),"block"===e(".js-popup-user-social").css("display")&&Fiverr.mainPopupBox.closeFast(),"block"===e(".js-popup-start-selling").css("display")&&Fiverr.mainPopupBox.closeFast(),e.cookie("fiverr_xauth")){if("yup"!==e.cookie("fiverr_login_retry"))return ft.utl.setCookie("fiverr_login_retry","yup"),void window.location.reload();ft.utl.removeCookie("fiverr_login_retry")}if(p&&Fiverr.models.browser.isMobileResponsive)return void e(i).addClass("popup-user-forms-mobile").find(".popup-content-login").show();var d=Fiverr.models.browser.isMobileOrTablet?[!1,!1]:[!0,!0];fSocialConnect.init(),Fiverr.mainPopupBox=e(i).first().bPopup({amsl:0,closeClass:"btn-close",opacity:.6,follow:d,position:["auto","auto"],appending:!1,escClose:l,modalClose:l,onOpen:function(){t.reportEvent("view","popup"),s||e("body").addClass("disable-scrolling"),e(".disable-body-clicks").length&&_.delay(function(){e(".disable-body-clicks").remove()},1e3),Fiverr.isInstantPopupNew?Fiverr.pushGoogleTag("activation-popup","instant-buy","new-user"):Fiverr.isInstantPopupExisting&&Fiverr.pushGoogleTag("activation-popup","instant-buy","existing-user"),e(i).attr("id","js-popup-user"),("join"===r||"login"===r)&&("start_selling"===n?ft.utl.setCookie("seller","start_selling",7):"start_selling_lp"===n&&ft.utl.setCookie("start_selling_ref",ft.utl.getUrlVars(o).start_selling_ref,7)),c&&(fGigs.orderStarted=c)},onClose:function(){switch(e(".disable-scrolling").length&&e("body").removeClass("disable-scrolling"),r){case"join":fForms.models.forms.popupJoinForm&&fForms.models.forms.popupJoinForm.fullReset(),fForms.models.forms.popupUnbounceJoinForm&&fForms.models.forms.popupUnbounceJoinForm.fullReset(),fForms.models.forms.popupInstantJoinForm&&fForms.models.forms.popupInstantJoinForm.fullReset();break;case"login":fForms.models.forms.popupSigninForm.fullReset(),fForms.models.forms.popupForgotPwForm.fullReset()}e(i).removeAttr("id"),c&&(fForms.models.forms.orderForm.enableFormSubmit(),fGigs.orderStarted=!1)}},function(){e(a).length&&e(a).focus()})},openSocialUserPopup:function(o,s,t){s=null!=s?s:!0,t=null!=t?t:!1;var o=o||null;if(o){if(Fiverr.models.browser.isMobileResponsive)return void(window.location.href=o);var i="undefined"!=typeof fGigs,n=i?fGigs.orderStarted:!1;"block"===e("#js-popup-user").css("display")&&(e("#js-popup-user").removeAttr("id"),Fiverr.mainPopupBox.closeFast()),e(".js-popup-user-social").length<1&&e("body").prepend('<div class="js-popup-user-social popup-user-social"></div>'),i&&(fGigs.orderStarted=n),Fiverr.mainPopupBox=e(".js-popup-user-social").bPopup({amsl:0,loadUrl:o,closeClass:"btn-close",opacity:.6,follow:[!0,!0],position:["auto","auto"],appending:!1,modalClose:s,loadCallback:function(o,s,i){""==e.trim(o)?window.location.reload():(fForms.models.forms.popupSigninForm=new r.newLoginForm,fForms.models.forms.popupFbForm=new r.newJoinForm,t&&fForms.models.forms.popupFbForm.form.submit())}})}},forceJoinPopup:function(){var r=this,o=r.models;r.selectors;"user_sessions"===o.c.psMain||"users"===o.c.psMain&&"new"===o.c.psSub||"manage_requests"===o.c.psMain&&"create_partner_confirmation"===o.c.psSub||(o.b.isMobileResponsive?document.location="/join"+location.search:Fiverr.openInlineUserPopupNew("join",e(this).attr("href")))},openStickyJoin:function(){var r=this,o=(r.models,r.selectors,ft.utl.getUrlVars()),s=e(".alert-join-banner"),t=s.find(".js-close-bar");if("undefined"!=typeof FiverrMobile){if(ft.utl.getLS("show-join-sticky",{},!0)&&!o.unbounce_join_email||ft.utl.getLS("hide-join-sticky",{},!0))return;if(s.addClass("sticky-footer sel js-sticky-footer"),ft.utl.setLS("show-join-sticky",!0,!0),ft.utl.getLS("unbounce-email")){var i=ft.utl.setUrlVars({url:"/join",params:{unbounce_join_email:ft.utl.getLS("unbounce-email")}});s.find(".js-join-btn").attr("href",i)}FiverrMobile.attachStickyFooter(),t.on("click",function(){s.removeClass("sticky-footer sel js-sticky-footer").addClass("hidden"),ft.utl.setLS("hide-join-sticky",!0,!0)})}},getAnchorPopupType:function(e,r){var o=["new_user","existing_user"];return _.first(_.intersection(e.attr("class").split(/\s+/),o))||r},resetReCAPTCHA:function(){var e=_.result(window,"grecaptcha.reset");return _.isFunction(e)?void e():void Fiverr._broadcastLogEvents({facility:"graphite",type:"long_counter",label:"fe_dependencies.counter.recaptcha",value:1})},populateReCAPTCHA:function(r,o){if(!r.find(".g-recaptcha").length){var s=e('<p class="recaptcha-wrapper"/>');r.append(s),Fiverr._getHbTemplate({tplType:"misc",tplName:"recaptcha",tplUrl:"//assetsv2.fiverrcdn.com/assets/templates-compiled/misc/recaptcha-a2820bf861239329deeef796ead5b959.js",tplData:{sitekey:"6LeK1AsUAAAAAK8DOWGtNoKQG53Dhnr09aMK_u_h"},callback:function(e){s.html(e),fLoader("https://www.google.com/recaptcha/api.js")}}),setTimeout(function(){0===r.find("iframe").length&&s.html(o)},2e3)}},reportEvent:function(e,o){var s=this,t=s.models,i=_.resolve(_.interpolate("%{0}.%{1}",arguments),t.eventsDictionary);r.reportKey(i,1)},reportRegErrors:function(e){var o=["username","email","password"];_.forEach(e,function(e){var s,t,i;switch(_.isArray(e)?(s=e[0],i=e[1].toLowerCase().replace(e[0],""),t=_.snakeCase(i)):(s=e,t="general_error"),s){case"userTaken":s="username",t="has_already_been_taken";break;case"userNotAllowed":s="username",t="not_allowed"}-1!==o.indexOf(s)&&r.reportKey("reg_error_"+s,t)})},reportKey:function(e,r){e&&r&&Fiverr._broadcastLogEvents({facility:"aux_data",label:e,value:r},{facility:"graphite",type:"long_counter",label:"signing_event.{platform}.{browser}.form_interaction."+e,value:r})}};window.fLoginForms=r,e.once("fiverr-global-parsed",_.bind(r.init,r))}(jQuery);